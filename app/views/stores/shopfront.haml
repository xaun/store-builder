- if @current_admin
  #admin-nav-bar
    %a{:href => "/admin"} Back to Dashboard

#store-page-container
  %nav
    #top-main-bar
      %a{:href => "#"}
        %h1= @store.store_name
      #top-main-bar-links
        %ul
          %li.link-3
            %a{:href => "#"} About
          %li.link-2
            %a{:href => "#"} Contact
          %li.link-1
            %a{:href => "#/cart"} Cart

    #top-selection-bar

  / Cheeky hidden div gets the store_id from the 'stores#shopfront' params[:id].
  / This makes it easy get the store_id from the DOM, and filter my db queries.
  .store_id{:style => 'display: none;'}= @store.id



  / Main view for Backbone rendering.
  #store-main



// ------   BACKBONE TEMPLATES ------ //

%script{:type => 'text/handlebars-template', :id => 'all-products-template'}

  .row
    {{#each products}}
    // Bootstrap column magic div
    %div{:class => 'col-xs-6 col-md-4', :id => 'grid-columns'}

      %div{:id => "top-tile-bar-{{id}}", :class => 'top-tile-bars'}
        %span.title {{title}}
        %span.price ${{price}}

      %a{:href => "#product/{{id}}"}
        .product-tiles{:style => "background-image: url(/assets/{{image}})"}

      %div{:id => "bot-tile-bar-{{id}}", :class => 'bot-tile-bars'}
        %div{:id => 'tiles-cart-button', :class => 'btn btn-success btn-sm', :data => { :product_id => '{{id}}' }} Add To Cart
    {{/each}}

  %footer
    #social-media
      - if @store.facebook
        = link_to(image_tag('fb-48.png', :id => 'facebook'), "#{@store.facebook}", :target => "_blank")
      - if @store.twitter
        = link_to(image_tag('twit-48.png', :id => 'twitter'), "#{@store.twitter}", :target => "_blank")
      - if @store.instagram
        = link_to(image_tag('insta-48.png', :id => 'instagram'), "#{@store.instagram}", :target => "_blank")
      - if @store.youtube
        = link_to(image_tag('tube-48.png', :id => 'youtube'), "#{@store.youtube}", :target => "_blank")
    #copyright
      %p= "Copyright #{Time.now.year} Â© #{@store.legal_business_name}."



%script{:type => 'text/handlebars-template', :id => 'product-template'}

  / #back-bar
  /   %a{:href => "#"}
  /     %img{:src => "/assets/back-arrow.png"}/
  #product-image{:style => "background-image: url(/assets/{{product.image}})"}
  #product-details
    #heading
      %span.price ${{product.price}}
      %div{:id => 'details-cart-button', :class => 'btn btn-success btn-sm', :data => { :product_id => '{{product.id}}' }} Add To Cart

    #description
      %h2 {{product.title}}
      %article {{product.description}}


%script{:type => 'text/handlebars-template', :id => 'cart-template'}

  / #back-bar
  /   %a{:href => "#"}
  /     %img{:src => "/assets/back-arrow.png"}/

  %table.table
    %thead
    %tbody
      {{#each cartItems}}
      %tr
        %td.image-column
          %a{:href => "#product/{{product_id}}"}
            %img{:src => "/assets/{{image}}", :width => '100x100'}/
        %td.title-column
          %a{:href => "#product/{{product_id}}"} {{title}}
        %td.price-column
          ${{price}}
        %td.remove-column
          %div{:id => 'remove-cart-item', :class => 'btn btn-danger btn-sm', :data => { :product_id => '{{id}}' }} Remove Item
      {{/each}}
  #checkout
    %a{:href => "#/checkout"}
      %div{:id => 'checkout-button', :class => 'btn btn-success'} Checkout


%script{:type => 'text/handlebars-template', :id => 'guest-checkout-template'}

  %input{:type => 'text', :id => 'first-name', :placeholder => 'First Name', :autofocus => true}/
  %input{:type => 'text', :id => 'last-name', :placeholder => 'Last Name'}/
  %input{:type => 'text', :id => 'email', :placeholder => 'Email'}/
  %input{:type => 'text', :id => 'phone-number', :placeholder => 'Phone'}/
  %input{:type => 'text', :id => 'street', :placeholder => 'Street'}/
  %input{:type => 'text', :id => 'city', :placeholder => 'City'}/
  %input{:type => 'text', :id => 'postcode', :placeholder => 'Postcode'}/
  %input{:type => 'text', :id => 'country', :placeholder => 'Country'}/
  %input{:type => 'text', :id => 'state', :placeholder => 'State'}/
  %a{:href => "#/confirm"}
    %div{:id => 'guest-details-button', :class => 'btn btn-success'} Submit


%script{:type => 'text/handlebars-template', :id => 'confirm-checkout-template'}
  %h1 {{cost.total}}
  %h4 Your Details
  %ul
    %li {{guest.first_name}}
    %li {{guest.last_name}}
    %li {{guest.email}}
    %li {{guest.phone_number}}
    %li {{guest.street}}
    %li {{guest.city}}
    %li {{guest.postcode}}
    %li {{guest.country}}
    %li {{guest.state}}

  %h4 Items
  %ul
  {{#each items}}
  %li {{title}}
  %li {{image}}
  %li {{price}}
  {{/each}}







